<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ product.name }} | Mall SKS</title>

    <!-- RESPONSIVE -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- MAIN CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>

{% include "header.html" %}

<!-- ================= PRODUCT PAGE ================= -->
<section class="product-page">

    <!-- LEFT : IMAGE -->
    <div class="product-image">
        <div class="slider">

    <!-- LEFT ARROW -->
    <button class="prev" id="prevBtn">‚ùÆ</button>

    <div class="slides" id="slides">
        <img src="{{ url_for('static', filename=product.image) }}">
        {% if product.image2 %}
        <img src="{{ url_for('static', filename=product.image2) }}">
        {% endif %}
        {% if product.image3 %}
        <img src="{{ url_for('static', filename=product.image3) }}">
        {% endif %}
    </div>

    <!-- RIGHT ARROW -->
    <button class="next" id="nextBtn">‚ùØ</button>

</div>

    </div>

    <!-- RIGHT : DETAILS -->
    <div class="product-details">

        <h1 class="product-title">{{ product.name }}</h1>
        <p class="product-price">‚Çπ {{ product.price }}</p>
        <p class="product-desc">
            Premium quality {{ product.name }} with modern fit.  
            Perfect for daily wear and special occasions.
        </p>

        <!-- SIZE SELECTION -->
        <div class="size-box">
            <label>Select Size:</label>
            <div class="sizes">
                {% if product.category == "men" and product.type in ["tshirt", "shirt"] %}
                    <span class="size">S</span>
                    <span class="size">M</span>
                    <span class="size">L</span>
                    <span class="size">XL</span>
                    <span class="size">XXL</span>
                {% endif %}
                {% if product.category == "men" and product.type == "pant" %}
                    <span class="size">28</span>
                    <span class="size">30</span>
                    <span class="size">32</span>
                    <span class="size">34</span>
                    <span class="size">36</span>
                {% endif %}
            </div>
            <input type="hidden" name="size" id="selectedSize">
        </div>

        <!-- QUANTITY -->
        <div class="qty-box">
            <label for="qty">Quantity</label>
            <select id="qty">
                {% for i in range(1,6) %}
                    <option value="{{ i }}">{{ i }}</option>
                {% endfor %}
            </select>
        </div>

        <!-- DELIVERY -->
        <p class="delivery">
            üöö Estimated delivery in <b>3‚Äì5 days</b>
        </p>

        <!-- ACTION BUTTONS -->
        <div class="product-buttons">

            <!-- WISHLIST -->
            <!-- WISHLIST -->
<a href="#" id="addToWishlistBtn" class="card-btn">
    Add to Wishlist
</a>

<!-- CART -->
<a href="#" id="addToCartBtn" class="btn-cart">
    üõí Add to Cart
</a>

<!-- BUY NOW -->
<a href="#" id="buyNowBtn" class="btn-buy">
    ‚ö° Buy Now
</a>


        </div>

        <!-- FEATURES -->
        <ul class="features">
            <li>‚úî 100% Original Products</li>
            <li>‚úî Easy 7 Days Return</li>
            <li>‚úî Cash on Delivery Available</li>
        </ul>

    </div>

</section>

{% include "footer.html" %}

<script>
document.addEventListener("DOMContentLoaded", function () {

    let index = 0;
const slides = document.getElementById("slides");
const prevBtn = document.getElementById("prevBtn");
const nextBtn = document.getElementById("nextBtn");

// NEXT BUTTON ‚Üí
nextBtn.addEventListener("click", () => {
    if (!slides) return;

    if (index < slides.children.length - 1) {
        index++;
        slides.style.transform = `translateX(-${index * 100}%)`;
    }
});

// PREVIOUS BUTTON ‚Üê
prevBtn.addEventListener("click", () => {
    if (!slides) return;

    if (index > 0) {
        index--;
        slides.style.transform = `translateX(-${index * 100}%)`;
    }
});




    const sizes = document.querySelectorAll(".size");
    const hiddenInput = document.getElementById("selectedSize");

    const addToCartBtn = document.getElementById("addToCartBtn");
    const addToWishlistBtn = document.getElementById("addToWishlistBtn");
    const buyNowBtn = document.getElementById("buyNowBtn");

    // SIZE CLICK
    sizes.forEach(size => {
        size.addEventListener("click", () => {
            sizes.forEach(s => s.classList.remove("active"));
            size.classList.add("active");
            hiddenInput.value = size.innerText;
        });
    });

    // ADD TO CART
    addToCartBtn.addEventListener("click", function (e) {
        e.preventDefault();
        const size = hiddenInput.value;
        if (!size) {
            alert("Please select a size before adding to cart!");
            return;
        }
        window.location.href = "{{ url_for('add_to_cart', product_id=product.id) }}" + "?size=" + encodeURIComponent(size);
    });

    // ADD TO WISHLIST
    addToWishlistBtn.addEventListener("click", function (e) {
        e.preventDefault();
        const size = hiddenInput.value;
        if (!size) {
            alert("Please select a size before adding to wishlist!");
            return;
        }
        window.location.href = "{{ url_for('add_to_wishlist', product_id=product.id) }}" + "?size=" + encodeURIComponent(size);
    });

    // BUY NOW
    buyNowBtn.addEventListener("click", function (e) {
        e.preventDefault();
        const size = hiddenInput.value;
        if (!size) {
            alert("Please select a size before proceeding!");
            return;
        }
        window.location.href = "{{ url_for('address', product_id=product.id) }}" + "?size=" + encodeURIComponent(size);
    });

});
</script>

</body>
</html>
